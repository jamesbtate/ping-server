{% extends "base.html" %}
{% block title %}Graph{% endblock %}
{% block body %}
<body>
<a href="/">Home</a>
<h2>{{ src }} to {{ dst }}</h2>
<h3>Statistics</h3>
<p> Data points: {{ statistics.echos }}
    Successes: {{ statistics.successes }}
    Timeouts: {{ statistics.timeouts }}
    Success Rate:
    {% if statistics.echos > 0 %}
        {{ "%.2f"|format(statistics.successes / statistics.echos * 100) }}%
    {% else %}
        0.0%
    {% endif %}
</p>
<p>
    Minimum: {{ "%.1fms"|format(statistics.minimum * 1000) }}
    Maximum: {{ "%.1fms"|format(statistics.maximum * 1000) }}
    Average (mean): {{ "%.1fms"|format(statistics.mean * 1000) }}
</p>
<h3>Graph</h3>
<img src='/graph_image/{{ pair_id }}?start_time={{ start_time }}&stop_time={{ stop_time }}' />
<p>
    <a href="/graph/{{ pair_id }}?start_time={{ start_time }}&stop_time={{ stop_time }}">Permalink to this graph</a>
    <a href="/graph/{{ pair_id }}?window=1h">Last Hour</a>
    <a href="/graph/{{ pair_id }}?window=8h">Last 8 Hours</a>
    <a href="/graph/{{ pair_id }}?window=1d">Last Day</a>
    <a href="/graph/{{ pair_id }}?window=1w">Last Week</a>
</p>
<p>
    <label for="start">Start Time:</label>
    <input type="text" name="start" id="start" data-initial="{{ start_time }}" class="timepicker"/>
    <input type="hidden" name="start_alt" id="start_alt" />
    <label for="stop">Stop Time:</label>
    <input type="text" name="stop" id="stop" data-initial="{{ stop_time }}" class="timepicker"/>
    <input type="hidden" name="stop_alt" id="stop_alt" />
    <input type="submit" value="Go" id="go"/>
</p>
<h3>Debug</h3>
<p>Data retrieval time: {{ "%0.3f" % retrieve_time }} seconds</p>
{# <p>Graph draw time: {{ "%0.3f" % draw_time }} seconds</p> #}

{% endblock %}
